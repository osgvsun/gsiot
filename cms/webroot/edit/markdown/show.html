<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8" />
    <title>HTML Preview(markdown to html)</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/editormd.preview.css" />
    <link rel="shortcut icon" href="https://pandao.github.io/editor.md/favicon.ico" type="image/x-icon" />
    <style>
        .editormd-html-preview {
            width: 90%;
            margin: 0 auto;
        }
    </style>
    <script src="js/jquery.min.js"></script>
    <script src="js/marked.min.js"></script>
    <script src="js/prettify.min.js"></script>

    <script src="js/raphael.min.js"></script>
    <script src="js/underscore.min.js"></script>
    <script src="js/sequence-diagram.min.js"></script>
    <script src="js/flowchart.min.js"></script>
    <script src="js/jquery.flowchart.min.js"></script>

    <script type="text/javascript" src="/scripts/data.js"></script>
    <script type="text/javascript" src="/scripts/element.js"></script>
    <script type="text/javascript" src="/scripts/webui.js"></script>
</head>

<body>
    <div id="layout" style="width:85%;border:1px solid #ccc;float:left;box-sizing:border-box;">
    </div>
    <div id="sidebar" style="width:15%;border:1px solid #ccc;float:left;box-sizing:border-box;">
        <h1>Table of Contents</h1>
        <div class="markdown-body editormd-preview-container" id="custom-toc-container">#custom-toc-container</div>
    </div>
        <script type="text/javascript">
            $(function () {
                var testEditormdView, testEditormdView2, url = new URL(window.location.href), file = "";
                if (url.searchParams.get("file") != null) { file = url.searchParams.get("file") };
                $.getScript("js/editormd.js", function () {
                    $("#layout").append("<div id=\"test-editormd\"></div>");

                    testEditormdView = editormd.markdownToHTML("test-editormd", {
                        markdown: new webFile(file).data,//+ "\r\n" + $("#append-test").text(),
                        //htmlDecode      : true,       // 开启 HTML 标签解析，为了安全性，默认不开启
                        htmlDecode: "style,script,iframe",  // you can filter tags decode
                        //toc             : false,
                        tocm: true,    // Using [TOCM]
                        tocContainer    : "#custom-toc-container", // 自定义 ToC 容器层
                        //gfm             : false,
                        //tocDropdown     : true,
                        // markdownSourceCode : true, // 是否保留 Markdown 源码，即是否删除保存源码的 Textarea 标签
                        emoji: true,
                        taskList: true,
                        tex: true,  // 默认不解析
                        flowChart: true,  // 默认不解析
                        sequenceDiagram: true  // 默认不解析
                    });
                    testEditormdView2 = editormd.markdownToHTML("test-editormd-view2", {
                        htmlDecode      : "style,script,iframe",  // you can filter tags decode
                        emoji           : true,
                        taskList        : true,
                        tex             : true,  // 默认不解析
                        flowChart       : true,  // 默认不解析
                        sequenceDiagram : true,  // 默认不解析
                    });
                });
            });
        </script>
</body>

</html>