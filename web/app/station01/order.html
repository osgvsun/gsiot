<!DOCTYPE HTML>
<html>
	<head>
		<meta name="renderer" content="webkit|ie-stand|ie-comp" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="Generator" content="GVSUN" />
		<meta name="Author" content="chenyawen" />
		<meta name="Keywords" content="" />
		<meta name="Description" content="" />
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<title>工位仪预约</title>
		<script type="text/javascript">
			window.LoadJscript = function(url, callback) {
				var flag = false,nodes = document.getElementsByTagName("script");
				for(var i=0;i<nodes.length;i++){if(nodes[i].src==url)flag=true;}
				if(flag == false) {
					var script = document.createElement('script');
					var fn = callback || function() {};
					script.type = 'text/javascript';
					script.src = url;
					(document.head || document.getElementsByTagName("head")[0]).appendChild(script);
					if(script.readyState) {
						script.onreadystatechange = function() {
							if(script.readyState == 'loaded' || script.readyState == 'complete') script.onreadystatechange = null;
							fn(url);
						}
					} else {
						script.onload = function() {
							fn(url)
						}
					}
				} else if(callback != null) callback(url);
			}
		</script>
	</head>
	<body>
		<div>
			<label>工号：：：</label>
			<label><input type="textbox" id="user" value="20110032"></label>
		</div>
		<div>
			<label>密码：：：</label>
			<label><input type="password" id="pwd" value="gvsun@123"></label>
	    </div>
		<div>
			<label>结束时间：</label>
			<label><input type="textbox" id="dt" value="00:00:00"></label>
		</div>
		<button id="submit">提交</button>
		<script type="text/javascript">
			rootpath = "/";
			LoadJscript(rootpath + "script/data.js")
			LoadJscript(rootpath + "script/element.js",function(url){
				LoadJscript(rootpath + "script/webui.js",function(url){
					$$("#submit").Click(function(){
						url=rootpath + "api/order/user/"+$$("#user").Val()+"/"+$$("#pwd").Val()+"/datetime/"+$$("#dt").Val();
						data=url.LoadURL()
						console.log(data)
						if(data.result.code==200)msg="预约成功"
						else{msg="预约失败，"+data.result.msg}
						newmsgbox(msg,3)
					})
				})
				result="/app/station/config.json".LoadJson()
				console.log(result.config.ReservationTime)
				d=new Date();d.setMinutes(d.getMinutes()+result.config.ReservationTime);
				$$("#dt").Val(d.Format("hh:mm:ss"))
				
			})
		</script>
	</body>
</html>

